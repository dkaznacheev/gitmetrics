<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Chart</title>
    <link rel="stylesheet" href="modest.css">
</head>

<body>
<h3 id="-">%REPONAME%</h3>
<div class="tab">
    <button class="tablinks" onclick="selectChart(event, 'LOC')" id="defButton">LOC</button>
    <button class="tablinks" onclick="selectChart(event, 'diffs')">Diffs</button>
</div>
<canvas id="myChart" width="800" height="400"></canvas>
</body>

<script src="Chart.js"></script>
<script src="chartjs-plugin-zoom.js"></script>
<script src="hammer.min.js"></script>

<script>
function selectChart(evt, chartName) {
    var datasets = [
    [{
        data: %DATA1%,
        borderColor: "rgb(75, 192, 192)",
        label: "Lines of code",
        fill: false,
        lineTension: 0.1
    }],

    [{
        data: %DATA2%,
        backgroundColor: "rgb(192, 75, 75)",
        label: "Lines added",
        fill: true,
        lineTension: 0.1,
        pointRadius: 1
    },
    {
        data: %DATA3%,
        backgroundColor: "rgb(75, 75, 192)",
        label: "Lines deleted",
        fill: true,
        lineTension: 0.1,
        pointRadius: 1
    },]
    ]

    var ctx = document.getElementById("myChart")
    var i
    if (chartName == 'LOC') {
        i = 0
    } else {
        i = 1
    }

    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: %LABELS%,
            datasets: datasets[i]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero:true
                    }
                }]
            },
            pan: {
                enabled: true,
                mode: 'x',
                speed:50,
            },

            zoom: {
                enabled: true,
                mode: 'x',
                limits: {
                    max: 10,
                    min: 0.5
                }
            }
        }
    });
}

document.getElementById("defButton").click();

</script>
</html>